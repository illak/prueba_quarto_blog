{
  "hash": "21adb1e491bdafe104cc8da3b2a96a46",
  "result": {
    "markdown": "---\ntitle: \"Anﾃ｡lisis de datos - Salarios por sector en ARG\"\nlang: es\nauthor: \"Zapata Illak\"\ndate: \"2022-07-29\"\ncategories: [anﾃ｡lisis, R, cﾃｳdigo]\nimage: \"mapa.png\"\nlanguage: \n  title-block-author-single: \"Autor\"\n  title-block-published: \"Fecha\"\n---\n\n\n\n\nEste es el primer post en este blog creado con [quarto](https://quarto.org/) y a modo de prueba voy a realizar un anﾃ｡lisis usando las [bases de datos del Ministerio de Desarrollo productivo](https://datos.produccion.gob.ar/dataset/salarios-por-departamento-partido-y-sector-de-actividad). Este anﾃ｡lisis se realiza en el contexto de un trabajo prﾃ｡ctico para una diplomatura. La idea es revisar aspectos de manipulaciﾃｳn de datos, la preparaciﾃｳn previa de los datos o, cﾃｳmo yo le digo, el \"amasado\" de datos, y de visualizaciﾃｳn, una de las formas mﾃ｡s eficientes (y divertidas) de comunicar y darle vida a los datos. Cabe seﾃｱalar que no voy a ahondar en detalles tﾃｩcnicos con respecto a funciones.\n\nPara comenzar vamos a cargar las librerias que usaremos a lo largo del documento.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)  # para flujo de trabajo con datos\nlibrary(sf)         # para trabajar con datos espaciales\nlibrary(lubridate)  # para trabajar con fechas\nlibrary(scales)     # para formatos varios\nlibrary(showtext)   # para cambiar las fuentes del texto\nlibrary(stringi)    # para manipulaciﾃｳn de texto\nlibrary(gganimate)  # para animar grﾃ｡ficas\nlibrary(gifski)     # para renderizar\n```\n:::\n\n\n## Sobre los datos\n\nLos datos corresponden al salario bruto promedio de los asalariados registrados, por sector de actividad (letra) y departamento (de acuerdo al domicilio donde vive la persona trabajadora). En este anﾃ｡lisis vamos a considerar el universo de \"total de empresas\" (sector privado junto con empresas pﾃｺblicas). Estos datos tienen una frecuencia mensual y van desde el 2014 hasta la actualidad.\n\n------------------------------------------------------------------------\n\nA continuaciﾃｳn cargamos los datos necesarios.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# archivo con informaciﾃｳn georeferenciada de los departamentos del paﾃｭs (este es un archivo otorgado y procesado para la realizaciﾃｳn del anﾃ｡lisis)\ndata_deptos_ARG <- read_sf(\"data/departamentos_arg.geojson\")\n\n# salario promedio por depto/partido y letra (total empresas)\nsalario_prom_depto_letra <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/salarios/w_mean_depto_tot_emp_letra.csv\")\n\n# salario promedio depto (total empresas)\nsalario_prom_depto <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/salarios/w_mean_depto_tot_emp.csv\")\n\n# diccionario deptos\ndicc_deptos <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/diccionario_cod_depto.csv\")\n\n# diccionario letras\ndicc_letras <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/diccionario_clae2.csv\")\n```\n:::\n\n\nVeamos primero una grﾃ｡fica inicial de los datos geogrﾃ｡ficos que nos proveen, deberﾃｭamos ver todos los departamentos del paﾃｭs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data_deptos_ARG) +\n  geom_sf() +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/solo deptos-1.png){width=672}\n:::\n:::\n\n\nPerfecto!, ahora comencemos con un poco de EDA. Veamos los datos de salarios para un aﾃｱo en particular\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# vamos a observar ﾃｺnicamente el aﾃｱo 2021\nsalarios_2021 <- salario_prom_depto %>% \n  # year es una funciﾃｳn de lubridate\n  filter(year(fecha)==2021)\n\nhead(salarios_2021)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 4\n  fecha      codigo_departamento_indec id_provincia_indec  w_mean\n  <date>                         <dbl>              <dbl>   <dbl>\n1 2021-01-01                      2000                  2 121888.\n2 2021-01-01                      6007                  6  66779.\n3 2021-01-01                      6014                  6  62485.\n4 2021-01-01                      6021                  6  88491.\n5 2021-01-01                      6028                  6  77481.\n6 2021-01-01                      6035                  6  82504.\n```\n:::\n\n```{.r .cell-code}\n# de acuerdo al marco metodolﾃｳgico y las deficiones de los\n# indicadores de la fuente de datos, los valores de -99 hacen\n# referencia a datos provenientes de una o dos observaciones\n# (puestos de trabajo) para preservar secreto estadﾃｭstico\n\n# filtramos los casos -99 y nos quedamos con el mes de diciembre\nsalarios_dic_2021 <- salarios_2021 %>% \n  filter(w_mean > 0, fecha == \"2021-12-01\")\n\n# observamos el resumen de w_mean para ver que no hayan casos raros\nsummary(salarios_dic_2021$w_mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  70443  112318  132916  137557  151941  357702 \n```\n:::\n:::\n\n\nA continuaciﾃｳn vamos a realizar el mapa coroplﾃｩtico de salarios de **diciembre 2021** con la finalidad de responder a la pregunta:\n\nﾂｿCuﾃ｡les son los departamentos con mayor salario promedio? 洟能n\n\n::: {.cell}\n\n```{.r .cell-code}\n# primero revisamos que la clave para el join tiene el mismo tipo en ambos DF\ntypeof(data_deptos_ARG$codigo_departamento_indec)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"character\"\n```\n:::\n\n```{.r .cell-code}\ntypeof(salarios_dic_2021$codigo_departamento_indec)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"double\"\n```\n:::\n\n```{.r .cell-code}\ntypeof(data_deptos_ARG$codigo_departamento_indec)==typeof(salarios_dic_2021$codigo_departamento_indec)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\n# corregimos el tipo \ndata_deptos_ARG <- data_deptos_ARG %>% \n  mutate(codigo_departamento_indec = as.numeric(codigo_departamento_indec))\n\n# agregamos la informaciﾃｳn de salarios para cada depto\ndeptos_salario_dic_2021 <- data_deptos_ARG %>% \n  left_join(salarios_dic_2021)\n\n# graficamos\nggplot(deptos_salario_dic_2021) +\n  geom_sf(aes(fill = w_mean)) +\n  labs(fill = \"Salario promedio\") +\n  # usamos la paleta de colores viridis cuya principal\n  # caracterﾃｭstica es la accesibilidad\n  scale_fill_viridis_c(option = \"viridis\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/distribuciﾃｳn dic 2021-1.png){width=672}\n:::\n:::\n\n\nComo se puede observar en el mapa, el salario promedio es mayor en el sur del paﾃｭs (o la Patagonia Argentina).\n\nPero... ﾂｿesta distribuciﾃｳn siempre fue asﾃｭ? 洟能n\nVeamos la distribuciﾃｳn del salario promedio pero para el 2014\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsalarios_dic_2014 <- salario_prom_depto %>% \n  filter(year(fecha)==2014) %>% \n  # filtramos los casos -99 y nos quedamos con el mes de diciembre\n  filter(w_mean > 0, fecha == \"2014-12-01\")\n\n# agregamos la informaciﾃｳn de salarios para cada depto\ndeptos_salario_dic_2014 <- data_deptos_ARG %>% \n  left_join(salarios_dic_2014)\n\n# graficamos\nggplot(deptos_salario_dic_2014) +\n  geom_sf(aes(fill = w_mean)) +\n  labs(fill = \"Salario promedio\") +\n  scale_fill_viridis_c(option = \"viridis\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/distribuciﾃｳn dic 2014-1.png){width=672}\n:::\n:::\n\n\nPodemos observar que la distribuciﾃｳn es similar, observando un leve pero distinguible aumento en el salario promedio a nivel territorial en el centro y este del paﾃｭs, ademﾃ｡s de un incremento en el rango de salarios mﾃｭnimo y mﾃ｡ximo.\n\nA continuaciﾃｳn vamos a ver la evoluciﾃｳn del promedio del salario en cada departamento. Para esto vamos a analizar los mismos puntos temporales de antes: **diciembre del 2014** y **diciembre del 2021**.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# preparamos los datos\ndata_salarios_2014_2021 <- salario_prom_depto %>% \n  filter(fecha == \"2014-12-01\" | fecha == \"2021-12-01\") %>% \n  mutate(anio = year(fecha)) %>% \n  select(codigo_departamento_indec, w_mean, anio) %>% \n  pivot_wider(names_from = anio, \n              values_from = w_mean, \n              names_prefix = \"anio_\") %>% \n  # filtramos departamentos que tienen valores -99 o nulos\n  filter(!is.na(codigo_departamento_indec)) %>% \n  filter(!is.na(anio_2014), anio_2014 > 0) %>% \n  filter(!is.na(anio_2021), anio_2021 > 0) %>% \n  # Calculamos el incremento en porcentaje\n  mutate(diff = (anio_2021 - anio_2014) / anio_2014 * 100)\n\n\n# agregamos la informaciﾃｳn de salarios para cada depto\ndeptos_salario_diff <- data_deptos_ARG %>% \n  left_join(data_salarios_2014_2021)\n\n# graficamos\nggplot(deptos_salario_diff) +\n  geom_sf(aes(fill = diff)) +\n  labs(fill = \"% aumento\") +\n  scale_fill_viridis_c(option = \"viridis\") +\n  theme_void() +\n  theme(\n    plot.title.position = \"plot\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/crecimiento histﾃｳrico porcentaje-1.png){width=672}\n:::\n:::\n\n\nEste mapa muestra la evoluciﾃｳn en porcentaje del crecimiento de salario en cada departamento. Una posible lectura de este mapa es que el crecimiento del salario promedio se dio de forma semi uniforme con algunas excepciones.\n\nEn el mapa podemos ver que hay departamentos con un aumento del salario de hasta 13 veces y en otros de hasta 5 veces.\n\nPasemos a la siguiente pregunta...\n\nﾂｿCuﾃ｡les son los 5 sectores de actividad con salarios mﾃ｡s bajos? 洟能n\nPara responder a esta pregunta vamos a utilizar los datos de salario promedio por sector y letra. Nos vamos a enfocar en el aﾃｱo 2021 y vamos a comparar estos sectores con los 2 sectores de mayor salario del mismo aﾃｱo.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# limpiamos diccionario de letras\ndicc_letras <- dicc_letras %>% \n  select(letra, letra_desc) %>% \n  unique()\n\n# filtramos el aﾃｱo a analizar\nsalario_prom_sector_2021 <- salario_prom_depto_letra %>% \n  filter(year(fecha)==2021) %>% \n  # cruzamos con el diccionario de letras\n  left_join(dicc_letras) %>% \n  # agrupamos por sector\n  group_by(letra_desc) %>% \n  # calculamos el salario promedio por sector (promedio del aﾃｱo)\n  summarise(salario_promedio = mean(w_mean, na.rm = TRUE)) %>% \n  arrange(salario_promedio)\n\nlast_row_idx <- salario_prom_sector_2021 %>% \n  nrow()\n\n\n\n## Loading Google fonts (https://fonts.google.com/)\nfont_add_google(\"Roboto condensed\", \"robo\")\n\n## Automatically use showtext to render text\nshowtext_auto()\n\n# graficamos los 5 sectores de actividad con salarios mﾃ｡s bajos del 2021\nggplot(salario_prom_sector_2021 %>% slice(c(1:5,last_row_idx-1, last_row_idx)), \n       aes(x = fct_reorder(letra_desc, -salario_promedio), \n           y = salario_promedio)) +\n  geom_col(aes(fill = salario_promedio < 100000)) +\n  geom_text(aes(label = scales::dollar(salario_promedio, \n                                       accuracy = .01, \n                                       big.mark = \".\", \n                                       decimal.mark = \",\"),\n                hjust = ifelse(salario_promedio < 100000,-0.1,1.1),\n                color = salario_promedio < 100000),\n           fontface = \"bold\",\n           size=7) +\n  coord_flip(clip=\"off\") +\n  scale_color_manual(values = c(\"white\",\"black\")) +\n  scale_fill_manual(values = c(\"grey70\",\"#D4C7FF\")) +\n  guides(fill=\"none\",color=\"none\") +\n  labs(x = \"none\",\n       title = \"Los 5 sectores con salario promedio mﾃ｡s bajo en el 2021\",\n       subtitle = \"En comparaciﾃｳn a los 2 sectores con salario promedio mﾃ｡s altos del mismo aﾃｱo\") +\n  theme_minimal(base_family = \"robo\", base_size = 20) +\n  theme(\n    axis.text.x = element_blank(),\n    axis.title = element_blank(),\n    panel.grid = element_blank(),\n    axis.text.y = element_text(face=\"bold\"),\n    plot.title.position = \"plot\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/sectores menor salario promedio-1.png){width=672}\n:::\n:::\n\n\nA partir de esto nos surge la siguiente pregunta...\n\nﾂｿEsto siempre fue asﾃｭ? 洟能n\nPara esto vamos a ver los 5 sectores con menor salario a lo largo del tiempo. En este caso vamos a hacer uso de la librerﾃｭa `gganimate` que nos permite extender `ggplot` agregando animaciﾃｳn a nuestras visualizaciones. Lo mﾃ｡s interesante es que basta con agregar 5 lﾃｭneas de cﾃｳdigo a lo que venﾃｭamos haciendo con `ggplot` y luego con la funciﾃｳn `animate` agregamos los parﾃ｡metros finales como por ejemplo la duraciﾃｳn del gif.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# filtramos los sectores a analizar\nsalario_prom_sector_evol <- salario_prom_depto_letra %>% \n  group_by(fecha, letra) %>% \n  summarise(salario_promedio = mean(w_mean, na.rm=T)) %>% \n  mutate(Rank = rank(salario_promedio)) %>% \n  filter(Rank <= 5) %>% \n  arrange(fecha, Rank) %>% \n # cruzamos con el diccionario de letras\n  left_join(dicc_letras) %>% \n  mutate(Rank = as.factor(Rank))\n\n\n# graficamos\nanim <- ggplot(salario_prom_sector_evol) +\n  geom_col(aes(x = fct_reorder(Rank, salario_promedio), \n               y = salario_promedio, \n               fill = letra_desc, \n               group = letra_desc),\n           width = 0.7) +\n  geom_text(aes(x = fct_reorder(Rank, salario_promedio), \n                y = 0,\n                label = letra_desc, group = letra_desc), \n            hjust = 0,\n            size = 3,\n            family = \"robo\") +\n  coord_flip(clip=\"off\") +\n  guides(fill = \"none\") +\n  labs(y = \"Salario Promedio\") +\n  theme_minimal() +\n  theme(axis.title.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        axis.text.x = element_text(family = \"robo\"),\n        axis.title.x = element_text(family = \"robo\"),\n        plot.margin = unit(c(5,10,5,0), 'lines')) +\n  # a partir de acﾃ｡ hacemos uso de gganimate\n  ggtitle('Mostrando los 5 sectores con salario promedio mﾃ｡s bajo en: {closest_state}') +\n  transition_states(fecha, state_length = 0, transition_length = 2) +\n  enter_fly(x_loc = 0, y_loc = 0) +\n  exit_fly(x_loc = 0, y_loc = 0) + \n  ease_aes('quadratic-in-out') \n\nanimate(anim, width = 700, height = 500, \n        fps = 25, duration = 40, rewind = FALSE)\n```\n:::\n\n\nEn este grﾃ｡fico podemos observar que de los 5 sectores con menor salario, 4 se mantienen histﾃｳricamente (entre ellos el sector de actividades relacionadas a la enseﾃｱanza).\n\nVeamos cﾃｳmo evolucionaron los salarios en cada sector usando otra alternativa. Para esto voy a hacer una de mis visualizaciones favoritas... una *\"dumbbell chart\"* (aﾃｺn no encuentro una traducciﾃｳn que me convenza... ﾂｿgrﾃ｡fico de mancuernas? ﾂｿde pesas?). El objetivo de esta visualizaciﾃｳn es poder **comparar** el crecimiento del salario promedio en cada sector desde el 2018 al 2021.\n\n\n::: {.cell fig.dim='[9,8]'}\n\n```{.r .cell-code}\n# preparamos los datos\nsalario_sector_evol <- salario_prom_depto_letra %>% \n  left_join(dicc_letras) %>% \n  mutate(anio = year(fecha)) %>% \n  filter(anio %in% c(2018,2021)) %>% \n  filter(!is.na(letra_desc)) %>% \n  group_by(letra_desc, anio) %>% \n  summarise(salario_promedio = mean(w_mean, na.rm = TRUE)) %>% \n  # usamos la funciﾃｳn str_wrap para \"achicar\" un poco el ancho \n  # de los textos\n  mutate(letra_2 = str_wrap(letra_desc,50),\n         anio = as.factor(anio),\n         salario_promedio_K = salario_promedio / 1000)\n\n\n# para las lineas del salario promedio del aﾃｱo\npromedio_2018_2021 <- salario_prom_depto_letra %>% \n  left_join(dicc_letras) %>% \n  mutate(anio = year(fecha)) %>% \n  filter(anio %in% c(2018,2021)) %>% \n  filter(!is.na(letra_desc)) %>% \n  group_by(anio) %>% \n  summarise(salario_promedio = mean(w_mean, na.rm = TRUE)) %>% \n  mutate(salario_promedio_K = salario_promedio / 1000) %>% \n  # generamos un vector con ambos valores\n  pull(salario_promedio_K)\n\n\n# para la dumbbell chart hacemos uso de dos geometrﾃｭas: \n# geom_line y geom_point\nggplot(salario_sector_evol, aes(x = salario_promedio_K, \n                                y = reorder(letra_2, salario_promedio_K),\n                                color = anio)) +\n  geom_line(aes(group = letra_2), size = 2, color = \"grey70\") +\n  # graficamos lﾃｭneas verticales para el promedio anual\n  geom_vline(xintercept = promedio_2018_2021, \n             alpha = .3, linetype = \"dotdash\", size = 1) +\n  geom_point(size = 5) +\n  geom_text(aes(label = scales::dollar(salario_promedio_K, suffix = \"K\", accuracy = 1),\n                hjust = ifelse(anio==2018,1.3,-0.3)),\n            alpha = .7,\n            size = 7,\n            show.legend = FALSE) +\n  scale_x_continuous(limits = c(0,220), expand = c(.2,0)) +\n  scale_color_manual(values = c(\"#8C826D\",\"#D9AF5B\")) +\n  labs(x = NULL, y = NULL, color = \"Aﾃｱo\") +\n  theme_minimal(base_family = \"robo\", base_size = 20) +\n  theme(\n    legend.position = \"top\",\n    axis.text.x = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    axis.text.y = element_text()\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/evoluciﾃｳn salario por sector-1.png){width=864}\n:::\n:::\n\n\nDe la visualizaciﾃｳn podemos ver que el crecimiento fue mayor en sectores con salarios altos.\n\n## Actualizaciﾃｳn\n\nel 28 de julio se agregaron las fuentes de datos correspondientes a los salarios por *clae* (sectores de actividad) por lo que podemos hacer un anﾃ｡lisis mﾃ｡s detallado de las actividades. Claramente este dataset va a tener muchas mﾃ｡s filas que nuestro primer dataset el cual contenﾃｭa informaciﾃｳn por letra o sector de actividad.\n\nCarguemos los datos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_clae <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/salarios/w_mean_depto_tot_emp_clae2.csv\")\n```\n:::\n\n\nveamos cuﾃ｡ntas filas tiene nuestro `dataframe`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(datos_clae)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3063963\n```\n:::\n\n```{.r .cell-code}\ndatos_clae %>% head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 x 5\n   fecha      codigo_departamento_indec id_provincia_indec clae2 w_mean\n   <date>                         <dbl>              <dbl> <dbl>  <dbl>\n 1 2014-01-01                      2000                  2     1 13085.\n 2 2014-01-01                      2000                  2     2 10081.\n 3 2014-01-01                      2000                  2     3 17837.\n 4 2014-01-01                      2000                  2     5 57688.\n 5 2014-01-01                      2000                  2     6 62211.\n 6 2014-01-01                      2000                  2     7 50522.\n 7 2014-01-01                      2000                  2     8 50411.\n 8 2014-01-01                      2000                  2     9 41279.\n 9 2014-01-01                      2000                  2    10 16659.\n10 2014-01-01                      2000                  2    11 23518.\n```\n:::\n:::\n\n\nInicialmente podemos hacer uso de los IDs de sectores identificados anteriormente para el diciembre del 2021. Para esta fecha los 5 sectores con menor salario se identifican por las letras: I, P, N, L, R. Usemos esta informaciﾃｳn para realizar los filtros correspondientes.\n\n\n::: {.cell fig.dim='[9,8]'}\n\n```{.r .cell-code}\n# volvemos a cargar el diccionario de clae/letras\n# pero esta vez no limpiamos el dataset\ndicc_clae <- read_csv(\"https://cdn.produccion.gob.ar/cdn-cep/datos-por-departamento/diccionario_clae2.csv\")\n\nsalario_prom_actividad_2021 <- datos_clae %>% \n  filter(fecha == \"2021-12-01\") %>% \n  left_join(dicc_clae) %>% \n  filter(letra %in% c(\"I\",\"P\",\"N\",\"L\",\"R\")) %>% \n  group_by(letra_desc, clae2_desc) %>% \n  summarise(salario_promedio = mean(w_mean, na.rm = T) / 1000)\n\n# visualicemos estos datos\nggplot(salario_prom_actividad_2021, \n       aes(x = fct_reorder(clae2_desc, salario_promedio), \n           y = salario_promedio,\n           fill = letra_desc)) +\n  geom_col() +\n  geom_text(aes(label = scales::dollar(salario_promedio, \n                                       suffix = \"K\",\n                                       accuracy = .1)), \n            hjust = 1.1, \n            fontface = \"bold\",\n            alpha = .6,\n            size = 8) +\n  coord_flip() +\n  ggtitle(\"Salario promedio por actividad/clae en diciembre del 2021\")+\n  labs(x = NULL, y = NULL, fill = \"Sector\") +\n  guides(x = \"none\") +\n  theme_minimal(base_size = 22) +\n  theme(\n    legend.position = \"bottom\",\n    legend.direction = \"vertical\",\n    plot.title.position = \"plot\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/anﾃ｡lisis por actividad-1.png){width=864}\n:::\n:::\n\n\nComparemos con la agrupaciﾃｳn por sectores (que ya habﾃｭamos calculado anteriormente).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsalario_prom_letra_2021 <- datos_clae %>% \n  filter(fecha == \"2021-12-01\") %>% \n  left_join(dicc_clae) %>% \n  filter(letra %in% c(\"I\",\"P\",\"N\",\"L\",\"R\")) %>% \n  group_by(letra_desc) %>% \n  summarise(salario_promedio = mean(w_mean, na.rm = T) / 1000)\n\n# visualicemos estos datos\nggplot(salario_prom_letra_2021, \n       aes(x = fct_reorder(letra_desc, salario_promedio), \n           y = salario_promedio,\n           fill = letra_desc)) +\n  geom_col() +\n  geom_text(aes(label = scales::dollar(salario_promedio, \n                                       suffix = \"K\",\n                                       accuracy = .1)), \n            hjust = 1.1, \n            fontface = \"bold\",\n            alpha = .6,\n            size = 8) +\n  coord_flip() +\n  ggtitle(\"Salario promedio por sector en diciembre del 2021\")+\n  labs(x = NULL, y = NULL) +\n  guides(x = \"none\", fill = \"none\") +\n  theme_minimal(base_size = 22) +\n  theme(\n    plot.title.position = \"plot\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\nClaramente la desagregaciﾃｳn de estos datos nos muestra un patrﾃｳn distinto.\n\nPrﾃｳximamente seguiremos con el anﾃ｡lisis a nivel departamental de estos datos....\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}